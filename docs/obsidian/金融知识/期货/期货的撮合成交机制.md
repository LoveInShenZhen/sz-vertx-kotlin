[原文链接](https://zhuanlan.zhihu.com/p/110796044)
**撮合成交**是国内期货交易所与证券交易所的常见达成交易的方式，**是指买卖双方将交易买卖的意向（交易委托），报送到交易所，由交易所按一定的原则进行配对，由交易所记录成交信息，并反馈交易结果。**

期货交易所以固定时间间隔（500毫秒）内的成交汇总后，形成行情报价，推送到行情软件，全市场由此可以得到公开的价格信息。

通常与撮合成交的方式相对应的是询价交易，常用于柜台交易或场外交易。

撮合成交原理是期货交易最重要的基本规则。理解这个原则可以回答许多具体问题：**报单为什么不成交？如何设置止损单才有保障？**

# 价格是由搓合成交生成的
开盘时段，行情软件不断向外报出价格，这些价格是由交易所搓合成交而成。你可以把交易所想象成农贸市场，多方相互竞价买卖，交易是否能达成，要看报价是否能匹配。实际上伦敦金属交易所的圈内交易，就是10家会员面对面报价交易。

实际上，价格就是成交结果的反馈。现代期货的电子交易，是将所有的交易者都汇集在虚拟主机中，交易者报出的委托都汇总在一起，当买卖委托的价格相匹配时，交易所会将成交结果反馈给投资者，并在市场上公示。国内商品交易所每半秒汇总一次成交总量，报出半秒时段内最后一笔成交价。同时还会报出系统内未成交的委托，通常是最高的买价和最低的卖价，因为这些委托比其他委托更具吸引力。

# 报单什么情况下不成交
价格引导投资者做出交易决策 。行情图表就是成交结果在时间轴上的展现，最新价代表着市场上最近达成的交易。多数投资者认为，自己报出相同价格的委托可以立即成交，但这一理解是错误的。对于投资者来说，最可能成交的价格是对手价。对手价经常称为买一价与卖一价，对于想要买进的投资者，卖一价就是对手价。按对手价买入，就相当于找到出价最低的卖方，并与它成交。

但投资者也会经常遇到对手价没成交的情形，我们观察到的对手价，是交易所系统中未成交的委托。考虑到市场环境瞬息万变，当我们按对手价发出的交易指令，经过一段延时到达交易所时，对手价的委托可能已经不存在了，这时委托就不会立刻成交。消失的对手价，可能被其他投资者抢先买走，也可能是投资者撤消了指令。

所以投资者网络延时越高，报价变化的可能越大。另外，价格快速波动时，对手价不成交的可能也很大。例如在连续上涨的环境中，依据卖价发送的买单委托，很可能不成交。因为价格波动越大，竞争性的交易者越多，时常会出现抢单的情况。

# 什么是流动性风险
没有交易对手报出合适的报价，我们的头寸就会面临流动性风险，这意味着无法持有合约或无法将合约平仓。涨跌停板是较为极端的流动性风险，由于规则限制，市场无法在合理的价格达成交易，从而形成流动性风险。

==流动性风险存在于不活跃的品种或不活跃的合约中。==期货合约的流动性往往比较集中于主力合约上，这对多数投资者来说是双赢的结果。但期货的非主力合约，比如豆粕2007，投资者必须承受不连续的买卖报价。我们==建议投资者不要交易日均成交小于5000手的合约。==

==主力合约也可能因为临近到期变得不再活跃，临近到期的合约保证金会提高，持仓限制会缩紧。==所以投资者会在限制来临前集中撤离，并于远期合约再相聚。这叫==移仓换月==，通常发生在主力合约还差两个月到期。

期货中“==多逼空==”的情况，其实也是一种流动性风险。多单集中在个别投资者手中，临近到期也不主动平仓离场。空单平仓时会找不到足量的对手盘，交割又难以备足可交付的现货。就象胶合板1404到期前的那样。最终被逼的空头只能报出高价买入平仓，市场将被推至不合理的高价。

# 撮合成交的原则
- 一般情况：价格优先、时间优先
- 涨跌停板：平仓优先、价格优先、时间优先
- 成交原则：买价大于等于卖价
- 成交价 ＝ 中间价（买价、卖价、前成交价）

# 条件单的使用
条件单与普通的委托比较，是一种**自动委托单**。分为价格条件单与时间条件单。

**价格条件单：** 指当市场的最新价格满足某种条件时，自动将委托报入交易所。

常见的价格条件单是**止损单**。

**时间条件单：** 是指到达某一时间时，自动将委托报入交易所。

## 实现止损交易，软件必须具有盯价功能
**示例**
投资者持有多单1手，行情最新价100，想要实现价格下跌至95时卖出平仓。
若在当前下达卖出平仓95，则会立刻以市价成交，成交价接近100。
所以必须设置当最新价达到95时，再以市价报入卖出平仓委托。

![[Pasted image 20220328002033.png]]
由于交易所目前并不支持报入价格或时间条件单，目前所有软件的条件单功能都是保存在投资者的个人电脑或保存在软件供应商提供的云端服务器中。

## 条件单会受到以下几个因素的影响
- 当个人电脑因断电，软件故障，网络故障等因素无法接收到最新的行情时，价格条件单的功能无法实现。
- 条件单的有效期限设置较短，在条件单失效后才满足止损条件。
- 条件单在设定时需要设定两个价格，一个是触发条件的价格，满足条件时按最新价或对手价报入委托，但由于网络延迟，仅形成挂单，未实际成交。

**TIP:**
- 止损单、止盈单要想保证成交，最好在满足条件时报**市价**委托；
- 如果担心市价止损单在价格急升急跌时成交价偏离太大，可以设定止损条件价加减(5-10)个波动点位申报买卖平仓委托。

# 期货成交价是怎么形成的
[原文链接](https://zhuanlan.zhihu.com/p/148022824)
## 期货委托价与成交价的概念
期货委托价指在下单时需要输入的价格，主要分为**限价指令**和**市价指令**，期货成交价指交易所计算机自动撮合系统将买卖申报指令以**价格优先**、**时间优先**的原则进行排序，当买入价大于等于卖出价则自动撮合成交形成的价格。

## 期货成交价的形成
- 当买入价大于、等于卖出价格则自动撮合成交，交易所交易系统的撮合成交价等于买入价(bp)、卖出价(sp)、和前一成交价(cp)三者中居中的一个价格。
- 当买入价≥卖出价≥前一成交价，则最新成交价=卖出价，当买入价≥前一成交价≥卖出价，则最新成交价=前一成交价，当前一成交价≥买入价≥卖出价，则最新成交价=买入价