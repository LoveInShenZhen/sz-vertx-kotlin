[原文链接](https://zhuanlan.zhihu.com/p/96122575)
先看看程序化交易用户是如何与期货公司、交易所进行信息交互的，然后再逐一拆分会涉及到的概念。
![[Pasted image 20220410124139.png]]

# 柜台
依据国内监管要求，客户无法直连交易所系统，中间必须经过==期货公司（Broker）==的系统，这便是柜台系统。期货公司会有多套柜台系统，在功能上可以分为==主席==和==次席==系统。

## 主席柜台
主席系统功能全面，支持出入金，盘后结算等，讲究的是高吞吐量与高可靠性，一般客户都是在主席系统上交易。

_例如CTP (Comprehensive Transaction Platform,综合交易平台)即是上期所子公司上期技术开发的一套主席系统。_

## 次席柜台
次席系统一般只做下单及撤单用，讲究的是低延迟穿透时间，一般为对时延要求较高的客户准备。次席柜台的资金划拨、结算等功能则交由主席柜台实现。

_闪策科技波塞东Poseidon期货极速交易系统就是次席交易柜台，柜台内部穿透耗时峰值在百纳秒级，尤其适用于对延时要求严苛的交易团队。_

对于同时报出的相同订单，次席的单子会先到达交易所撮合。不过报单如何最快地到达交易所是由很多因素所决定的，大家可以回顾下我们之前的推送[《纳秒级穿透的交易系统到底往返穿透了啥？》。](https://zhuanlan.zhihu.com/p/78356185)

## API
柜台系统一般都会提供API（Application Programming Interface，应用程序编程接口）给程序化客户接入柜台使用。

柜台也需要用调用交易所API来接收行情、传送交易订单。

==**知识点，在中国，任何柜台系统都必须调用交易所API才能下单。**==

什么是API接口？

你可以认为API是一个服务与外界进行交互的接口。

比如交易所的API接口。

闪策科技的波塞东Poseidon极速交易柜台要将用户的交易订单传输给交易所，就需要调用交易所的API来进行交易。

交易所的工程师已经写好了可以接入交易所报盘机的函数，波塞东只需要根据交易所提供的接口文档，在系统中设置好规定的函数，然后运行函数会触发相应的功能。

**简单地说，API就是传递数据和触发功能，让软件与其他软件实现快速交流。**

我们不需要知道交易所的报单API具体的业务实现逻辑，只要调用就可以实现交易功能。

## 前置机
**交易柜台需要通过前置系统与交易所主机连接，即是柜台与交易所撮合系统之间的通讯中继。**

前置服务器不仅仅是起到了中间桥梁的作用，它还要以通讯IP地址控制连入的终端，起减少交易主机的网络负担的作用，以及对交易指令进行一部分的正确性检测处理。

同时，还可以起到防火墙的功能，防止交易主机受到外界的攻击，确保交易主机的安全运行。

为缓解交易系统压力，提高期货公司交易速度，交易所会设置多个交易前置机均衡前置机的系统负载，期货公司可按照交易所发布的前置机IP优选配置规则进行配置。

## 行情和交易接口
对于任何程序化交易策略而言，行情接口和交易接口都是不可或缺的组成部分，行情是所有交易策略最基础的信号源，而各种交易信号的发送和接收则是交易策略的最终实现形式。

### 行情接口
行情数据接口可以向交易所技术公司、信息经营公司或第三方授权的信息经营商购买。

各大期货交易所均有信息技术子公司对外提供行情接口服务，小结如下：郑商所下属子公司——郑州易盛信息技术有限公司；

大商所下属子公司——大连飞创信息技术有限公司；

上期所下属子公司——上海期货信息技术有限公司；

中金所下属子公司——上海金融期货信息技术有限公司；

可把以上四家公司理解为期权期货行情市场的一级批发商，提供各交易所期货期权合约行情资讯、交易接口以及为国内期货公司提供交易系统运维托管服务。

随着市场技术趋势发展，各个公司不仅仅提供自家数据，部分公司也有可对接其他期货交易所和证券交易所行情交易接口的产品。

### 交易接口
因为中国期货市场采用会员制管理，只有交易所会员单位即期货公司才有资格向交易所购买交易席位。程序化交易团队可以联系期货公司提供交易接口的通道服务。

## 服务器托管
也称Co-location，适用于低延时交易用户。HFT公司或自营交易团队可向期货公司申请机柜和网络资源，**将交易主机与交易所的交易主机在物理距离上尽可能近地放置在一起。**

国内四大期货交易所都有自己的机房，另外期货公司有自己的服务器托管中心。只有期货公司可以向交易所租用托管机房机柜。期货公司通过提供机柜，购买设备，购买或租用软件为其客户提供服务。高端程序化交易者往往自购设备，自行调优后，经期货公司同意，放到租用的机柜内进行交易。

早期，国内期货公司为节省投入与成本、IT建设方面，常常租用运营商的机房，因为租用比自建要便宜很多。针对这种现象，各大期货交易所陆续在自有数据中心中，划出一片区域，面向期货公司提供机柜托管服务。一是进一步降低了成本，二是提高了行业机房安全水平，三是速度快，受到会员单位欢迎。

**交易所提供的托管机房受制于场地及电力所限，一般资源容量有限，常常供不应求。**

可见，托管资源也是期货公司差异化服务机构用户的核心竞争力之一。